plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '0.5.0'
}

group 'de.domjos'
version '2.0'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    compile files('lib/ksoap2-j2se-full-2.1.2.jar')
    testCompile group: 'junit', name: 'junit', version: '4.12'
}

// See https://github.com/JetBrains/gradle-intellij-plugin/
intellij {
    version '2020.1'
}

runIde {

}

patchPluginXml {
    changeNotes """
        Version 1.5<br>
        - use System-Icons
        - Update UI
    """
    pluginDescription "IntelliJ-Idea Plugin to create, edit and delete Issues from Mantis BugTracker!"
}

def file = new File("jetbrains.properties")
if(file.exists()) {
    def jetBrainsProperties = new Properties()
    jetBrainsProperties.load(new FileInputStream(file))

    publishPlugin {
        token jetBrainsProperties['token']
    }
}